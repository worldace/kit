var e,n,_,t,o,r,l={},i=[],c=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function s(e,t){for(var n in t)e[n]=t[n];return e}function f(e){var t=e.parentNode;t&&t.removeChild(e)}function a(t,n,_){var o,r,l,u={};for(l in n)"key"==l?o=n[l]:"ref"==l?r=n[l]:u[l]=n[l];if(arguments.length>2&&(u.children=arguments.length>3?e.call(arguments,2):_),"function"==typeof t&&null!=t.defaultProps)for(l in t.defaultProps)void 0===u[l]&&(u[l]=t.defaultProps[l]);return p(t,u,o,r,null)}function p(e,t,o,r,l){var u={type:e,props:t,key:o,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==l?++_:l};return null!=n.vnode&&n.vnode(u),u}function h(e){return e.children}function d(e,t){this.props=e,this.context=t}function v(e,t){if(null==t)return e.__?v(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?v(e):null}function y(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return y(e)}}function m(e){(!e.__d&&(e.__d=!0)&&t.push(e)&&!g.__r++||r!==n.debounceRendering)&&((r=n.debounceRendering)||o)(g)}function g(){for(var e;g.__r=t.length;)e=t.sort((function(e,t){return e.__v.__b-t.__v.__b})),t=[],e.some((function(e){var t,n,_,o,r,l;e.__d&&(r=(o=(t=e).__v).__e,(l=t.__P)&&(n=[],(_=s({},o)).__v=o.__v+1,P(l,o,_,t.__n,void 0!==l.ownerSVGElement,null!=o.__h?[r]:null,n,null==r?v(o):r,o.__h),D(n,o),o.__e!=r&&y(o)))}))}function k(e,t,n,_,o,r,u,s,c,f){var a,d,y,m,g,k,S,w=_&&_.__k||i,x=w.length;for(n.__k=[],a=0;a<t.length;a++)if(null!=(m=n.__k[a]=null==(m=t[a])||"boolean"==typeof m?null:"string"==typeof m||"number"==typeof m||"bigint"==typeof m?p(null,m,null,null,m):Array.isArray(m)?p(h,{children:m},null,null,null):m.__b>0?p(m.type,m.props,m.key,null,m.__v):m)){if(m.__=n,m.__b=n.__b+1,null===(y=w[a])||y&&m.key==y.key&&m.type===y.type)w[a]=void 0;else for(d=0;d<x;d++){if((y=w[d])&&m.key==y.key&&m.type===y.type){w[d]=void 0;break}y=null}P(e,m,y=y||l,o,r,u,s,c,f),g=m.__e,(d=m.ref)&&y.ref!=d&&(S||(S=[]),y.ref&&S.push(y.ref,null,m),S.push(d,m.__c||g,m)),null!=g?(null==k&&(k=g),"function"==typeof m.type&&null!=m.__k&&m.__k===y.__k?m.__d=c=b(m,c,e):c=C(e,m,y,w,g,c),f||"option"!==n.type?"function"==typeof n.type&&(n.__d=c):e.value=""):c&&y.__e==c&&c.parentNode!=e&&(c=v(y))}for(n.__e=k,a=x;a--;)null!=w[a]&&("function"==typeof n.type&&null!=w[a].__e&&w[a].__e==n.__d&&(n.__d=v(_,a+1)),U(w[a],w[a]));if(S)for(a=0;a<S.length;a++)T(S[a],S[++a],S[++a])}function b(e,t,n){var _,o;for(_=0;_<e.__k.length;_++)(o=e.__k[_])&&(o.__=e,t="function"==typeof o.type?b(o,t,n):C(n,o,o,e.__k,o.__e,t));return t}function C(e,t,n,_,o,r){var l,u,i;if(void 0!==t.__d)l=t.__d,t.__d=void 0;else if(null==n||o!=r||null==o.parentNode)e:if(null==r||r.parentNode!==e)e.appendChild(o),l=null;else{for(u=r,i=0;(u=u.nextSibling)&&i<_.length;i+=2)if(u==o)break e;e.insertBefore(o,r),l=r}return void 0!==l?l:o.nextSibling}function x(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]=null==n?"":"number"!=typeof n||c.test(t)?n:n+"px"}function H(e,t,n,_,o){var r;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof _&&(e.style.cssText=_=""),_)for(t in _)n&&t in n||x(e.style,t,"");if(n)for(t in n)_&&n[t]===_[t]||x(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])r=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+r]=n,n?_||e.addEventListener(t,r?S:E,r):e.removeEventListener(t,r?S:E,r);else if("dangerouslySetInnerHTML"!==t){if(o)t=t.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null!=n&&(!1!==n||"a"===t[0]&&"r"===t[1])?e.setAttribute(t,n):e.removeAttribute(t))}}function E(e){this.l[e.type+!1](n.event?n.event(e):e)}function S(e){this.l[e.type+!0](n.event?n.event(e):e)}function P(e,t,_,o,r,l,u,i,c){var f,a,p,y,v,m,g,S,b,x,P,E=t.type;if(void 0!==t.constructor)return null;null!=_.__h&&(c=_.__h,i=t.__e=_.__e,t.__h=null,l=[i]),(f=n.__b)&&f(t);try{e:if("function"==typeof E){if(S=t.props,b=(f=E.contextType)&&o[f.__c],x=f?b?b.props.value:f.__:o,_.__c?g=(a=t.__c=_.__c).__=a.__E:("prototype"in E&&E.prototype.render?t.__c=a=new E(S,x):(t.__c=a=new d(S,x),a.constructor=E,a.render=A),b&&b.sub(a),a.props=S,a.state||(a.state={}),a.context=x,a.__n=o,p=a.__d=!0,a.__h=[]),null==a.__s&&(a.__s=a.state),null!=E.getDerivedStateFromProps&&(a.__s==a.state&&(a.__s=s({},a.__s)),s(a.__s,E.getDerivedStateFromProps(S,a.__s))),y=a.props,v=a.state,p)null==E.getDerivedStateFromProps&&null!=a.componentWillMount&&a.componentWillMount(),null!=a.componentDidMount&&a.__h.push(a.componentDidMount);else{if(null==E.getDerivedStateFromProps&&S!==y&&null!=a.componentWillReceiveProps&&a.componentWillReceiveProps(S,x),!a.__e&&null!=a.shouldComponentUpdate&&!1===a.shouldComponentUpdate(S,a.__s,x)||t.__v===_.__v){a.props=S,a.state=a.__s,t.__v!==_.__v&&(a.__d=!1),a.__v=t,t.__e=_.__e,t.__k=_.__k,t.__k.forEach((function(e){e&&(e.__=t)})),a.__h.length&&u.push(a);break e}null!=a.componentWillUpdate&&a.componentWillUpdate(S,a.__s,x),null!=a.componentDidUpdate&&a.__h.push((function(){a.componentDidUpdate(y,v,m)}))}a.context=x,a.props=S,a.state=a.__s,(f=n.__r)&&f(t),a.__d=!1,a.__v=t,a.__P=e,f=a.render(a.props,a.state,a.context),a.state=a.__s,null!=a.getChildContext&&(o=s(s({},o),a.getChildContext())),p||null==a.getSnapshotBeforeUpdate||(m=a.getSnapshotBeforeUpdate(y,v)),P=null!=f&&f.type===h&&null==f.key?f.props.children:f,k(e,Array.isArray(P)?P:[P],t,_,o,r,l,u,i,c),a.base=t.__e,t.__h=null,a.__h.length&&u.push(a),g&&(a.__E=a.__=null),a.__e=!1}else null==l&&t.__v===_.__v?(t.__k=_.__k,t.__e=_.__e):t.__e=w(_.__e,t,_,o,r,l,u,c);(f=n.diffed)&&f(t)}catch(e){t.__v=null,(c||null!=l)&&(t.__e=i,t.__h=!!c,l[l.indexOf(i)]=null),n.__e(e,t,_)}}function D(e,t){n.__c&&n.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){n.__e(e,t.__v)}}))}function w(t,n,_,o,r,u,i,s){var c,a,p,h=_.props,d=n.props,y=n.type,m=0;if("svg"===y&&(r=!0),null!=u)for(;m<u.length;m++)if((c=u[m])&&(c===t||(y?c.localName==y:3==c.nodeType))){t=c,u[m]=null;break}if(null==t){if(null===y)return document.createTextNode(d);t=r?document.createElementNS("http://www.w3.org/2000/svg",y):document.createElement(y,d.is&&d),u=null,s=!1}if(null===y)h===d||s&&t.data===d||(t.data=d);else{if(u=u&&e.call(t.childNodes),a=(h=_.props||l).dangerouslySetInnerHTML,p=d.dangerouslySetInnerHTML,!s){if(null!=u)for(h={},m=0;m<t.attributes.length;m++)h[t.attributes[m].name]=t.attributes[m].value;(p||a)&&(p&&(a&&p.__html==a.__html||p.__html===t.innerHTML)||(t.innerHTML=p&&p.__html||""))}if(function(e,t,n,_,o){var r;for(r in n)"children"===r||"key"===r||r in t||H(e,r,null,n[r],_);for(r in t)o&&"function"!=typeof t[r]||"children"===r||"key"===r||"value"===r||"checked"===r||n[r]===t[r]||H(e,r,t[r],n[r],_)}(t,d,h,r,s),p)n.__k=[];else if(m=n.props.children,k(t,Array.isArray(m)?m:[m],n,_,o,r&&"foreignObject"!==y,u,i,u?u[0]:_.__k&&v(_,0),s),null!=u)for(m=u.length;m--;)null!=u[m]&&f(u[m]);s||("value"in d&&void 0!==(m=d.value)&&(m!==t.value||"progress"===y&&!m)&&H(t,"value",m,h.value,!1),"checked"in d&&void 0!==(m=d.checked)&&m!==t.checked&&H(t,"checked",m,h.checked,!1))}return t}function T(e,t,_){try{"function"==typeof e?e(t):e.current=t}catch(e){n.__e(e,_)}}function U(e,t,_){var o,r;if(n.unmount&&n.unmount(e),(o=e.ref)&&(o.current&&o.current!==e.__e||T(o,null,t)),null!=(o=e.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(e){n.__e(e,t)}o.base=o.__P=null}if(o=e.__k)for(r=0;r<o.length;r++)o[r]&&U(o[r],t,"function"!=typeof e.type);_||null==e.__e||f(e.__e),e.__e=e.__d=void 0}function A(e,t,n){return this.constructor(e,n)}function M(t,_,o){var r,u,i;n.__&&n.__(t,_),u=(r="function"==typeof o)?null:o&&o.__k||_.__k,i=[],P(_,t=(!r&&o||_).__k=a(h,null,[t]),u||l,l,void 0!==_.ownerSVGElement,!r&&o?[o]:u?null:_.firstChild?e.call(_.childNodes):null,i,!r&&o?o:u?u.__e:_.firstChild,r),D(i,t)}e=i.slice,n={__e:function(e,t){for(var n,_,o;t=t.__;)if((n=t.__c)&&!n.__)try{if((_=n.constructor)&&null!=_.getDerivedStateFromError&&(n.setState(_.getDerivedStateFromError(e)),o=n.__d),null!=n.componentDidCatch&&(n.componentDidCatch(e),o=n.__d),o)return n.__E=n}catch(t){e=t}throw e}},_=0,d.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=s({},this.state),"function"==typeof e&&(e=e(s({},n),this.props)),e&&s(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),m(this))},d.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),m(this))},d.prototype.render=h,t=[],o="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,g.__r=0;var N,W,I=[],O=n.__b,V=n.__r,q=n.diffed,B=n.__c,$=n.unmount;function te(){I.forEach((function(e){if(e.__P)try{e.__H.__h.forEach(re),e.__H.__h.forEach(ue),e.__H.__h=[]}catch(t){e.__H.__h=[],n.__e(t,e.__v)}})),I=[]}n.__b=function(e){N=null,O&&O(e)},n.__r=function(e){V&&V(e);var t=(N=e.__c).__H;t&&(t.__h.forEach(re),t.__h.forEach(ue),t.__h=[])},n.diffed=function(e){q&&q(e);var t=e.__c;t&&t.__H&&t.__H.__h.length&&(1!==I.push(t)&&W===n.requestAnimationFrame||((W=n.requestAnimationFrame)||function(e){var t,n=function(){clearTimeout(_),oe&&cancelAnimationFrame(t),setTimeout(e)},_=setTimeout(n,100);oe&&(t=requestAnimationFrame(n))})(te)),N=void 0},n.__c=function(e,t){t.some((function(e){try{e.__h.forEach(re),e.__h=e.__h.filter((function(e){return!e.__||ue(e)}))}catch(_){t.some((function(e){e.__h&&(e.__h=[])})),t=[],n.__e(_,e.__v)}})),B&&B(e,t)},n.unmount=function(e){$&&$(e);var t=e.__c;if(t&&t.__H)try{t.__H.__.forEach(re)}catch(e){n.__e(e,t.__v)}};var oe="function"==typeof requestAnimationFrame;function re(e){var t=N;"function"==typeof e.__c&&e.__c(),N=t}function ue(e){var t=N;e.__c=e.__(),N=t}var ce=function(e,t,n,_){var o;t[0]=0;for(var r=1;r<t.length;r++){var l=t[r++],u=t[r]?(t[0]|=l?1:2,n[t[r++]]):t[++r];3===l?_[0]=u:4===l?_[1]=Object.assign(_[1]||{},u):5===l?(_[1]=_[1]||{})[t[++r]]=u:6===l?_[1][t[++r]]+=u+"":l?(o=e.apply(u,ce(e,u,n,["",null])),_.push(o),u[0]?t[0]|=2:(t[r-2]=0,t[r]=o)):_.push(u)}return _},se=new Map,fe=function(e){var t=se.get(this);return t||(t=new Map,se.set(this,t)),(t=ce(this,t.get(e)||(t.set(e,t=function(e){for(var t,n,_=1,o="",r="",l=[0],u=function(e){1===_&&(e||(o=o.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?l.push(0,e,o):3===_&&(e||o)?(l.push(3,e,o),_=2):2===_&&"..."===o&&e?l.push(4,e,0):2===_&&o&&!e?l.push(5,0,!0,o):_>=5&&((o||!e&&5===_)&&(l.push(_,0,o,n),_=6),e&&(l.push(_,e,0,n),_=6)),o=""},i=0;i<e.length;i++){i&&(1===_&&u(),u(i));for(var s=0;s<e[i].length;s++)t=e[i][s],1===_?"<"===t?(u(),l=[l],_=3):o+=t:4===_?"--"===o&&">"===t?(_=1,o=""):o=t+o[0]:r?t===r?r="":o+=t:'"'===t||"'"===t?r=t:">"===t?(u(),_=1):_&&("="===t?(_=5,n=o,o=""):"/"===t&&(_<5||">"===e[i][s+1])?(u(),3===_&&(l=l[0]),_=l,(l=l[0]).push(2,0,_),_=0):" "===t||"\t"===t||"\n"===t||"\r"===t?(u(),_=2):o+=t),3===_&&"!--"===o&&(_=4,l=l[0])}return u(),l}(e)),t),arguments,[])).length>1?t:t[0]}.bind(a);const CSS=new Map;function kit(e,...t){if(Array.isArray(e))return fe(e,...t);if(e.shadowRoot){if(e.vdom){let t=e.html();e.css&&!document.adoptedStyleSheets&&(t=[t,fe`<style>${e.css()}</style>`]),M(t,e.shadowRoot)}}else{e.attachShadow({mode:"open"}),e.$=createProxy(e);const t=Object.getOwnPropertyNames(e.constructor.prototype).filter((t=>"function"==typeof e[t]));if(t.forEach((t=>e[t]=e[t].bind(e))),e.css&&document.adoptedStyleSheets){let t=CSS.get(e.constructor);t||(t=new CSSStyleSheet,t.replaceSync(e.css()),CSS.set(e.constructor,t)),e.shadowRoot.adoptedStyleSheets=[t]}let n=e.html();e.vdom=void 0===n.constructor||Array.isArray(n),e.vdom?(e.css&&!document.adoptedStyleSheets&&(n=[n,fe`<style>${e.css()}</style>`]),M(n,e.shadowRoot)):"string"==typeof n?(e.css&&!document.adoptedStyleSheets&&(n+=`<style>${e.css()}</style>`),e.shadowRoot.innerHTML=n):(e.css&&!document.adoptedStyleSheets&&(e.shadowRoot.innerHTML=`<style>${e.css()}</style>`),e.shadowRoot.append(n));for(const n of t){const t=n.match(/^\$(.*?)_([^_]+)$/);if(t){(""===t[1]?e.shadowRoot:e.shadowRoot.querySelector(`#${t[1]}`)).addEventListener(t[2],e[n])}}}}function createProxy(e){return new Proxy((function(){}),{get:function(t,n){return e.shadowRoot.querySelector(`#${n}`)},set:function(t,n,_){return e[n]=_,M(e.html(),e.shadowRoot),!0},apply:function(t,n,_){const o=_[0];return o.startsWith("*")?Array.from(e.shadowRoot.querySelectorAll(o.substring(1)||"*")):e.shadowRoot.querySelector(o)}})}export{kit as default};